موضوع:ترفند‌هایی در مونت کردن فایل پشتیبان تهیه شده از کل هارد‌دیسک
ارايه دهنده: بیژن ابراهیمی

سناریو:
فرض کنید فایل پشتیبانی را از کل هارد دیسک خود که شامل چندین پارتیشن می‌باشد، به صورت زیر بدست‌اورده اید:
# dd if=/dev/sda of=hdd.iso

به دلیل آنکه فایل پشتیبان فوق حاوی اطلاعات بیشتری همچون رکورد‌های مستر‌بوت و فلگ‌های مربوطه و حتی چندین پارتیشن جداگانه می‌باشد، شما نمیتوانید آن را به صورت دستی با دستور mount مشاهده کنید!

# mount -o loop hdd.iso /mnt
mount: you must specify the filesystem type

راه حل:
برای مشاهده اطلاعات موجود در پارتیشن مختلف فایل پشتیبان هارددیسک خود کافی است به دستور mount بگوئیم که از چندمین بایت شروع به عمل مونت کردن کند. برای به دست آوردن آدرس شروع پارتیشن میتوانید از برنامه parted استفاده کنید:

$ parted hdd.iso
(parted) [unit]--------------> برای تغییر واحد پیش‌فرض برنامه
uni? [compact]? [B]----------> واحد پیش‌فرض را به بایت تغییر میدهد
(parted) [p]-----------------> نمایش لیست پارتیشن‌ها
Model:  (file)
Disk /backup/hdd.iso: 969971712B
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Number  Start       End         Size        Type      File system  Flags
 1      16384B      200015871B  199999488B  primary   ext2
 2      200015872B  969932799B  769916928B  extended               lba
 5      200032256B  969932799B  769900544B  logical   ext2


مشاهده می‌کنید که اولین پارتیشن هارد دیسک (primary) از بایت 16384 شروع شده است! حال برای مونت کردن پارتیشن مزبور کافی است از پارامتر offset استفاده کنیم:
# mount -o loop,ro,offset=16384 hdd.iso /mnt

همچنین میتوانیم برای جدا کردن پارتیشن داخل فایل پشتیبان، به عنوان مثال پارتیشن اول از دستور dd به صورت زیر استفاده کنیم:

$ dd if=hdd.iso skip=16384 bs=512 count=390624 of=hdd_primary_partition.iso