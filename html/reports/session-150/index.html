<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml" />
  <!-- FAVICON -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="icon" type="image/png" href="/favicon.png" />
  <title>گروه کاربران لینوکس مشهد | گزارش جلسه ۱۵۰‌ام گروه کاربران لینوکس مشهد</title>
  <!-- Stylesheets -->
  <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/css/bootstrap-rtl.min.css" rel="stylesheet">
  <link href="/assets/css/font-awesome.css" rel="stylesheet">
  <link href="/style.css" rel="stylesheet">
  
  <!-- Javascript -->
  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/js/jquery.plugin.js"></script>
  <script src="/assets/js/jquery.countdown-fa.js"></script>
  <script src="/assets/js/jquery.countdown.min.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>
  <script src="/assets/js/jquery.timeago.js"></script>
  <script src="/assets/js/jquery.timeago.fa.js"></script>
  <!--<script src="/assets/js/TimeCircles.js"></script>-->
  
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
  <body>
    <div class="cover mini">
      <div class="container">
        <div class="row">
          <div class="logo">
            <img src="/assets/images/MashhadLUGtop.png" alt="گروه کاربران لینوکس مشهد" />
          </div>
          <div class="slogan">
            <h1>گروه کاربران لینوکس مشهد</h1>
            <h2 class="hidden-xs">آزادی نرم‌افزار از اعتقادات ماست</h2>
          </div>
        </div>
      </div>
    </div>
    
    <div class="">
      <div class="container">
        <div class="row">
          <ul class="top-navbar col-md-12 list-unstyled">
  
    
    <li class="col-md-2 col-sm-3 col-xs-6 ">
      <a href="/index.html" title="رویداد بعدی گروه، جلسه ۱۵۴ام">
        <img src="/assets/images/icons/internet-and-web-4/internt_web_technology-01.png" alt="رویداد بعدی گروه، جلسه ۱۵۴ام" />
        <h4>
          خانه
        </h4>
        <p>رویداد بعدی گروه</p>
      </a>
    </li>
    
  
    
    <li class="col-md-2 col-sm-3 col-xs-6 ">
      <a href="/reports.html" title="گزارشی از رویدادهای گذشته گروه کاربران لینوکس مشهد">
        <img src="/assets/images/icons/internet-and-web-4/internt_web_technology-10.png" alt="گزارشی از رویدادهای گذشته گروه کاربران لینوکس مشهد" />
        <h4>
          گزارشات
        </h4>
        <p>رویدادهای قبلی گروه</p>
      </a>
    </li>
    
  
    
    <li class="col-md-2 col-sm-3 col-xs-6 ">
      <a href="/constitution.html" title="اساسنامه گروه کاربران لینوکس مشهد">
        <img src="/assets/images/icons/internet-and-web-4/internt_web_technology-06.png" alt="اساسنامه گروه کاربران لینوکس مشهد" />
        <h4>
          اساسنامه
        </h4>
        <p>اهداف و وظایف</p>
      </a>
    </li>
    
  
    
    <li class="col-md-2 col-sm-3 col-xs-6 ">
      <a href="/wiki.html" title="ویکی">
        <img src="/assets/images/icons/internet-and-web-4/internt_web_technology-05.png" alt="ویکی" />
        <h4>
          دانشنامه
        </h4>
        <p>مقاله‌های علمی گروه</p>
      </a>
    </li>
    
  
    
    <li class="col-md-2 col-sm-3 col-xs-6 ">
      <a href="/activities.html" title="درباره گروه کاربران لینوکس مشهد بیشتر بدانید">
        <img src="/assets/images/icons/internet-and-web-4/internt_web_technology-13.png" alt="درباره گروه کاربران لینوکس مشهد بیشتر بدانید" />
        <h4>
          فعالیت‌ها
        </h4>
        <p>جشن‌ها و سمینارها</p>
      </a>
    </li>
    
  
    
    <li class="col-md-2 col-sm-3 col-xs-6 ">
      <a href="/contact.html" title="درباره گروه کاربران لینوکس مشهد بیشتر بدانید">
        <img src="/assets/images/icons/internet-and-web-4/internt_web_technology-14.png" alt="درباره گروه کاربران لینوکس مشهد بیشتر بدانید" />
        <h4>
          تماس با ما
        </h4>
        <p>ارتباط با اعضای گروه</p>
      </a>
    </li>
    
  
</ul>
        </div>
        <div class="row">
          
  <div class="page">
    <p>این جلسه در تاریخ ۰۷ خرداد ۱۳۹۳ در محل برگزاری جلسات  در آموزشگاه دیتاسنتر شرق برگزار شد. مباحثی که در این جلسه به آنها پرداخته شد را در زیر مشاهده خواهید نمود:</p>
<!--more-->

<h2>اخبار دنیای آزاد و متن‌باز <em>محمدامین جهانی</em></h2>
<p>این هفته نیز با بررسی اخبار دنیای نرم‌افزارهای آزاد و متن‌باز با آقای جهانی همراه بودیم. در این جلسه اخباری از انتشار نسخه ۳۵ مرورگر کرومیوم و تغییرات کلیدی آن تا انتشار نسخه پایدار سیستم‌عامل SteamOS را بررسی کردیم.</p>
<!--PDF:DELETE_MILLIONS_OF_FILES-->

<!--tags:delete,linux-->

<h2>خط فرمان: حذف میلیون‌ها فایل در یک سیستم لینوکسی <em>مهدی عطائیان</em></h2>
<p>در خط فرمان این هفته، آقای عطائیان سناریویی را مطرح کردند که در آن بواسطه وجود تعداد زیادی از فایل‌های (لزوما نه حجیم)، سیستم قادر به ذخیره کردن فایل جدید نمی‌باشد. در این موقعیت بهینه‌ترین راه برای حذف میلیون‌ها میلیون فایل از روی دیسک سخت‌ شما چه می‌باشد؟</p>
<p>‫inode ساختمان داده‌ای است که در فایل‌سیستم لینوکس اطلاعاتی مانند فایل‌ها، دایرکتوری‌ها و سایر خصوصیات فایل‌سیستم را دخیره می‌کند. هر فایل‌سیستم تعداد محدودی inode و در نتیجه میزان مشخصی از فایل‌ها را می‌تواند نگه‌داری کند. چنانچه تعداد فایل‌های یک فایل‌سیستم از میزان مشخصی بیشتر شود، تعداد inodeهای مجاز آن فایل‌سیستم به اتمام می‌رسد و امکان ذخیره و ایجاد تعداد بیشتری فایل وجود ندارد. برای یافتن تعداد inode‌های مجاز از دستور زیر استفاده می‌کنیم.</p>
<pre><code>$ df -i
Filesystem       Inodes IUsed    IFree IUse% Mounted on
rootfs         60506112 32619 60473493    1% /
</code></pre>
<p>اطلاعات بیشتر inode را با دستور زیر می‌توان مشاهده کرد.</p>
<pre><code># tune2fs -l /dev/sda1 | grep -i inode
Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery sparse_super
Inode count:              131072
Free inodes:              131037
Inodes per group:         2048
Inode blocks per group:   256
First inode:              11
Inode size:              128
Journal inode:            8
Journal backup:           inode blocks
</code></pre>
<p>این دستور حداکثر تعداد inode قابل اختصاص و inode‌های اختصاص یافته را نشان می‌دهد. </p>
<p>چنانچه آی‌نودهای فایل سیستم پر شود تنها راه حل مشکل پاک کردن فایل‌ها و دایرکتوری‌ها می‌باشد. راه‌های متفاوتی برای پاک کردن فایل‌ها وجود دارد.
ابتدا باید فایل‌ها را مشاهده کنیم که در خط فرمان با استفاده از دستور ls می‌توانیم این کار را انجام دهیم. اما اگر تعداد فایل‌های یک دایرکتوری از تعداد مشخصی بیشتر باشد اجرای دستور ls بسیار زمان‌بر خواهد بود. در یک دایرکتوری با ۵۱۰۰۰۰ فایل اجرای دستور ls‬ حدود ۳۱ ثانیه زمان خواهد برد.</p>
<pre><code>$ time ls
0m31.325s
</code></pre>
<p>نکته: برای ایجاد این تعداد فایل در یک دایرکتوری، و تست دستورات این بخش می‌توانید از دستور زیر استفاده کنید.</p>
<pre><code>$ cd /path/to/temporary/directory/
$ for i in $(seq 1 510000); do echo "" &gt;&gt; $i.txt; done
</code></pre>
<p>و از طرفی چنانچه بخواهیم سایر خصوصیات مانند زمان ایجاد و یا حجم فایل را مشاهده کنیم باید دستور ls را با پارامتر ‪-l‬ به کار ببریم. این دستور در دایرکتوری‌ای با ۵۱۰۰۰۰ فایل ۱ دقیقه و ۱۱ ثانیه زمان خواهد بود.</p>
<pre><code>$ time ls -l
1m11.900s
</code></pre>
<p>بهترین راه برای مشاده فایل‌ها استفاده از دستور ls با پارامتر ‪-1‬ است. این دستور فایل‌های یک دایرکتوری با همان تعداد فایل را در حدود ۱۸ ثانیه لیست خواهد کرد.</p>
<pre><code>$ time ls -1
0m18.900s
</code></pre>
<p>برای پاک کردن فایل‌ها از دستور rm به همراه پارامتر ‪-rf‬ استفاده می‌کنیم.</p>
<pre><code>$ rm -rf /path/to/directory/*
</code></pre>
<p>در لینوکس تعداد آرگومان‌هایی که می‌توان به عنوان پارامتر به هر دستور ارسال کرد محدود است. برای مشاهده این محدودیت در سیستم خود از دستور ریز استفاده می‌کنیم.</p>
<pre><code>$ getconf ARG_MAX
2097152
</code></pre>
<p>همچنین برای اطلاعات بیشتر درباره دلایل این محدودیت می‌توانید <a href="http://www.in-ulm.de/~mascheck/various/argmax/">این مقاله</a> را مطالعه نمایید. در نتیجه چنانچه دستور ‪rm -rf *‬ را در دایرکتوری‌ای اجرا کنیم که تعداد فایل‌های آن از حاصل عبارت ‫2097152-4 بیشتر باشد، دستور فوق با خطای <code>command: Argument list too long</code> متوقف می‌شود. دلیل این خطا نیز این است که آدرس این فایل‌ها به عنوان آرگومان به دستور rm ارسال می‌شود که در نتیجه از تعداد آرگومان‌های مجاز (که در بالا دیدیم) تجاوز خواهد کرد.</p>
<p>برای رفع این مشکل چند راه متفاوت داریم. در تمامی راه‌حل‌های زیر باید ۵۱۰٫۰۰۰ فایل موجود در یک دایرکتوری را حذف کنیم.</p>
<ul>
<li>
<p><strong>استفاده از دستور find</strong>:</p>
<p>اجرای دستور اول بیش از ۲۶ دقیقه و دستور دوم حدود ۷ دقیقه زمان خواهد برد.</p>
<pre><code>$ time find . -type f -exec rm '{}' \;

$ find . -print0 | xargs -0 rm
</code></pre>
</li>
<li>
<p><strong>استفاده از دستور ls</strong>:</p>
<p>این دستور ۱۹ ثانیه زمان خواهد برد.</p>
<pre><code>$ ls -1 | xargs rm -f
</code></pre>
</li>
</ul>
<p>با توجه به نتایج فوق، بهترین و سریع‌ترین راه پاک کردن تعداد زیادی فایل در یک دایرکتوری استفاده از دستور <code>ls -1 | xargs rm -f</code> است.</p>
<p>گاهی اوقات تعداد غیر قابل تصوری فایل، می‌تواند اجرای دستور را با مشکل مواجه کند. به عنوان مثال فرض کنیم باید دو میلیاد فایل در یک دایرکتوری را حذف کنیم. از آنجا که مدیریت حجم چنین لیستی از خروجی ممکن است بسیار بیشتر از میزان حافظه قابل دسترس سیستم باشد، اجرای این دستور غیر ممکن جلوه می‌نماید. برای رفع این مشکل ابتدا دستور ls را اجرا می‌کنیم و خروجی دستور را در یک فایل ذخیره می‌کنیم. در مرحله بعد اطلاعات را از فایل می‌خوانیم و با استفاده از دستور xargs و فراخوانی دستور rm فایلها را پاک میکنیم.</p>
<pre><code>$ ls -1 &gt; file.txt
$ rm $(&lt;file.txt)
# -- OR --
$ xargs rm &lt; file.txt
</code></pre>
<p>پانویس: هر چند حذف تعداد زیادی فایل در مدت زمانی کوتاه می‌تواند در نگاه اول بهینه به نظر برسد، ولی باید بیاد داشته باشیم که بهمین ترتیب نیز سیستم را درگیر پروسه سنگین حذف فایل‌هایی خواهیم کرد که <code>load average</code> سیستم را بالا خواهد برد که نهایتا «ممکن» است موجب اختلال در عملکرد دیگر سرویس‌ها شود. بنابراین اگر نیاز به انجام چنین کاری بر روی یک سرور production دارید، بهتر است از یکی از روش‌های کُندتر (مانند حلقه for-loop) استفاده کنید. پانویس برگرفته از <a href="http://www.pronego.com/helpdesk/knowledgebase.php?article=59">این مقاله</a> می‌باشد.</p>
<p>پانویس ۲: محدودیتی که در بالا به آن اشاره شد، در واقع محدودیت حذف فایل نیست بلکه محدودیت ارسال پارامتر به دستورات خط فرمانی می‌باشد. بنابراین به عنوان مثال اگر بخواهیم تمام فایل‌های یک دایرکتوری را حذف می‌کنیم (صرف نظر از تعداد آنها) می‌توان به سادگی دایرکتوری والد را به با دستور <code>‪rm -rf parent/‬</code> حذف کرد.</p>
<!--PDF:DELETE_MILLIONS_OF_FILES-->

<h2>کرنل لینوکس و کامپایل آن <em>علی موسوی</em></h2>
<p>در ارائه این هفته با ارائه «کرنل لینوکس و کامپایل آن» همراه آقای موسوی بودیم. برای مشاهده و همچنین دانلود اسلایدهای ارائه می‌توانید به <a href="http://www.slideshare.net/tuxitop/ss-35300452">اینجا</a> مراجعه نمایید. و همچنین توضیحات کامل ارایه را می‌توانید در قالب فایل PDF از <a href="http://www.mashhadlug.org/fa/system/files/compile%20a%20linux%20kernel_0.pdf">اینجا</a> دریافت و مطالعه نمایید.</p>
<h2>بحث آزاد</h2>
<p>در ادامه جلسه و طبق روال معمول، دقایقی از جلسه به بحث آزاد بین اعضای گروه سپری شد. در زیر لیستی از مهم‌ترین موارد مطرح شده را مشاهده خواهید نمود.</p>
<ul>
<li>
<h3>اعلام نتیجه انتخابات راهبران و انتخاب نفر پنجم گروه راهبران</h3>
<p>در ادامه و نیز با هماهنگی‌ای که بین آقایان «محمدامین جهانی» و «مهدی عطائیان» دو عضو کاندید برای نفر پنجمی گروه راهبران انجام شده بود و با کناره‌گیری آقای عطائیان، پنجمین عضو گروه راهبران نیز انتخاب شد. بدین ترتیب آقای «محمدامین جهانی» به همراه آقایان «آرش موسوی»، «علیرضا حکم‌آبادی»، «رامین نجارباشی» و «علی موسوی» به مدت یکسال از تاریخ ۷ خرداد ۱۳۹۳ به عنوان راهبران مشهدلاگ فعالیت خواهند کرد. آقای «مهدی عطائیان» و «محمدجواد بدیعی» نیز به عنوان اعضای علی‌البدل در صورت نیاز فعالیت خواهند کرد.</p>
</li>
<li>
<h3>آرشیو جلسات <em>بیژن ابراهیمی</em></h3>
<p>با توجه به انتقاد برخی از دوستان از نحوه اعلام برنامه‌های گروه در جلسات پیش‌رو، از دوستان و علاقمندانی که در لیست‌پستی برای ارائه در جلسات آینده اعلام آمادگی می‌کنند خواهش می‌شود ضمن اعلام آمادگی خود، توضیحات مختصر و مفیدی را نیز درباره ماهیت ارائه، پیش‌نیازها و سطح علمی آن در اختیار دیگر دوستان و همچنین مدیران جلسه قرار دهند تا به نحو شایسته‌ای در اخبار گروه منعکس گردد. همچنین دوستانی که در جلسات گروه به هر نحوی ارائه‌ای را برگزار می‌کنند لطفا آمادگی تهیه آرشیو تصویری از دسکتاپ خود را داشته باشند. برای دریافت اطلاعات بیشتر درباره نحوه انجام اینکار می‌توانید به <a href="http://wiki.mashhadlug.org/doku.php?id=%D8%AC%D9%84%D8%B3%D8%A7%D8%AA_%DA%AF%D8%B1%D9%88%D9%87:%D8%B1%D8%A7%D9%87%D9%86%D9%85%D8%A7%DB%8C_%D8%A2%D8%B1%D8%B4%DB%8C%D9%88_%D8%A7%D8%B1%D8%A7%D8%A6%D9%87_%D9%87%D8%A7">اینجا</a> مراجعه نمایید.</p>
</li>
<li>
<h3>کتابخانه منابع آموزشی گروه کاربران لینوکس مشهد <em>مجید رمضانپور</em></h3>
<p>با توجه به اهدا شدن ۲ کتاب توسط انتشارات O'Reilly به گروه کاربران لینوکس مشهد که توسط پیگیری‌های آقای نجارباشی و در قالب سیاست حمایت از گروه‌های کاربری انتشارات O'Reilly صورت گرفته شده بود، آقای رمضانپور به همراه آقای نجارباشی پیشنهاد ایجاد کتابخانه‌ای برای نگهداری و اهدای محتوای آموزشی مانند کتاب و یا فیلم را مطرح کردند. دوستان و علاقمندان می‌توانند در صورت دلخواه کتاب‌ها و یا فیلم‌های آموزشی خود را به این کتابخانه اهدا کنند تا توسط دیگر اعضای گروه مورد استفاده قرار بگیرد. اطلاعات بیشتر درباره چگونگی اهدا و یا دریافت این منابع به صورت امانتی به زودی از طریق رسانه‌های ارتباطی گروه اعلام خواهند شد.</p>
</li>
</ul>
<p>این جلسه در ساعت ۱۹:۴۰ دقیقه خاتمه یافت. با تشکر از شما، گروه آماده دریافت هرگونه نظر، پیشنهاد و انتقاد شما دوستان و اعضای گروه می‌باشد.</p>
  </div>

        </div>
      </div>
    </div>
    <div class="footer">
  <div class="container">
    <div class="others col-md-4 col-sm-4 col-xs-12">
      <h4>گروه‌های دیگر:</h4>
      <p>
        اگر در شهر شما گروه کاربران لینوکس وجود دارد، به آنها ملحق شوید.
      </p>
      <ul class="other">
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://tehlug.org/">تهران‌لاگ</a></li>
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://karajlug.org/">کرج لاگ</a></li>
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://www.isfahanlug.org/">اصفهان‌لاگ</a></li>
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://www.zanjanlug.org/">زنجان‌لاگ</a></li>
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://www.gullug.org/">گیلان‌لاگ</a></li>
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://khuzestanlug.ir/">خوزستان‌لاگ</a></li>
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://tabrix.org">تبریز‌لاگ </a></li>
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://klug.ir">کرمان‌لاگ</a></li>
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://www.yazdlug.com/">یزد‌لاگ</a></li>
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://bulug.ir/">بوشهر‌لاگ</a></li>
      </ul>
    </div>
    <div class="links col-md-4 col-sm-4 col-xs-12">
      <h4>پیوندهای مفید:</h4>
      <p>
        پیوند‌های زیر شما را در رسیدن به اهداف گروه یاری خواهند رساند.
      </p>
      <ul class="list-unstyled">
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://nerdnews.ir">نرد نیوز</a></li>
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://linuxreview.ir">لینوکس ریویو</a></li>
        <li class="col-md-6 col-sm-6 col-xs-6"><a target="_new" href="http://linuxseason.ir">لینوکس سیزن</a></li>
      </ul>
    </div>
    <div class="supporters col-md-4 col-sm-4 col-xs-12">
      <h4>حامیان:</h4>
      <p>
        شما نیز می‌توانید ما را در این راه یاری رسانید.
      </p>
      <ul class="list-unstyled sponsers">
        <li>
          <a target="_new" href="http://www.oreilly.com/">
            <img src="/assets/images/OReilly_Media_eagle.gif" alt="O'Reilly Media" />
          </a>
        </li>
        <li>
          <img src="/assets/images/IranServer.png" alt="" />
        </li>
        <li>
          <img src="/assets/images/edc.png" alt="" />
        </li>
      </ul>
    </div>
  </div>
  <div class="dark">
    <div class="container">
      <div class="copyright col-md-12 text-center">
        <ul>
          <li>اطلاعات این وب‌سایت تحت گواهینامه GFDL در دسترس است.</li>
          <li>کپی‌رایت ۱۳۹۳ - گروه کاربران لینوکس مشهد</li>
          <li>
            <ul class="list-unstyled">
              <li>
                <a target="_new" href="https://github.com/mashhadlug/website">
                  <i class="fa fa-github-square"></i>
                </a>
              </li>
              <li>
                <a target="_new" href="rss.xml">
                  <i class="fa fa-rss-square"></i>
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
    <script type="text/javascript">
      $(document).ready(function(){
        $('.timer').timeago()
        $('.event-timer').each(function(){
          var due_date_attr = $(this).attr('data-time')
          var due_date_timestamp = Date.parse(due_date_attr)
          var due_date = new Date(due_date_timestamp)
          console.log(due_date_attr, due_date_timestamp, due_date)
          $(this).countdown({
            until: due_date,
            layout: $(this).html()
          });
        })
      })
    </script>
  </body>
</html>